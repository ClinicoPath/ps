<div id="t-test" class="d-flex flex-column h-100"
  [class.block-selection]="blockSelection" (mouseup)="mouseup()">

  <div id="t-test-main" class="row d-flex" style="flex: 1 0 auto">
    <div class="col-4 d-flex flex-column justify-content-between">
      <div id="t-test-sidebar" class="d-flex flex-row" style="flex: auto">
        <div class="overview">
          <button type="button" class="btn btn-secondary" (click)="toggleHelp('overview')">
            Overview <i class="fa fa-question-circle"></i>
          </button>
        </div>
        <ngb-tabset #tabset (tabChange)="onTabChange($event)">
          <ngb-tab title="Start" id="t-test-start">
            <ng-template ngbTabContent>
              <t-test-start [model]="newModel"
                (onCalculate)="calculate()"
                (onToggleHelp)="toggleHelp('start')">
              </t-test-start>
            </ng-template>
          </ngb-tab>
          <ngb-tab *ngFor="let modelSet of modelSets; let i = index"
            title="Test {{i+1}}" id="t-test-{{i+1}}">
            <ng-template ngbTabContent>
              <t-test-form [model-set]="modelSet"></t-test-form>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>

      <div id="t-test-footer" class="d-flex">
        <img src="assets/biostat.jpg">
      </div>
    </div>
    <div class="col-8">
      <div class="plot-buttons" *ngIf="selectedModelSet">
        <button class="btn btn-secondary" (click)="togglePlotOptions()">
          <i class="fa fa-cog"></i>
        </button>
        <button class="btn btn-secondary" (click)="save()">
          <i class="fa fa-floppy-o"></i>
        </button>
        <button class="btn btn-secondary" (click)="toggleHoverBox()">
          <i class="fa" [class.fa-cubes]="hoverBoxEnabled" [class.fa-cube]="!hoverBoxEnabled"></i>
        </button>
      </div>
      <t-test-output-pane #outputPane
        [model-set]="selectedModelSet"
        [hover-disabled]="!hoverBoxEnabled">
      </t-test-output-pane>
    </div>
  </div>
  <t-test-draggable-dialog #helpDialog
    [title]="helpTitles[helpTopic]"
    start-x-offset="33%" start-y-offset="55px"
    (drag-start)="childDragStarted()"
    (drag-end)="childDragEnded()">
    <t-test-help [topic]="helpTopic"></t-test-help>
  </t-test-draggable-dialog>
  <t-test-draggable-dialog #plotOptionsDialog
    title="Plot options"
    start-x-offset="5%" start-y-offset="55px"
    (drag-start)="childDragStarted()"
    (drag-end)="childDragEnded()">
    <t-test-plot-options [model-set]="selectedModelSet">
    </t-test-plot-options>
  </t-test-draggable-dialog>
</div>
