<div class="container-fluid" style="height: 99vh">
  <h1>{{title}}</h1>

  <div class="row" style="height: 90%">
    <div id="sidebar" class="col-sm-4">
      <ngb-tabset #tabset>
        <ngb-tab title="Start">
          <template ngbTabContent>
            <form (ngSubmit)="onSubmit()" #ttestForm="ngForm">
              <div class="form-group">
                <label for="output">What do you want to know?</label>
                <select class="form-control" id="output"
                        required
                        [(ngModel)]="ttest.output" name="output">
                  <option></option>
                  <option value="sampleSize">Sample size</option>
                  <option value="power">Power</option>
                  <option value="detAlt">Detectable alternative</option>
                </select>
              </div>
              <!--
              <div class="form-group" *ngIf="ttest.output">
                <label for="design">Paired or independent?</label>
                <select class="form-control" id="design"
                        required
                        [(ngModel)]="ttest.design" name="design">
                  <option></option>
                  <option>Paired</option>
                  <option>Independent</option>
                </select>
              </div>
              -->
              <div *ngIf="ttest.output == 'sampleSize'">
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="alpha">Type I Error (&alpha;)</label>
                      <input class="form-control" id="alpha"
                             type="number" step="0.05"
                             required
                             [(ngModel)]="ttest.alpha" name="alpha">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="power">Power</label>
                      <input class="form-control" id="power"
                             type="number" step="0.05"
                             required
                             [(ngModel)]="ttest.power" name="power">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="case-mean">Case mean</label>
                      <input class="form-control" id="case-mean"
                             type="number"
                             required
                             [(ngModel)]="ttest.caseMean" name="caseMean">
                     </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="control-mean">Control mean</label>
                      <input class="form-control" id="control-mean"
                             type="number"
                             required
                             [(ngModel)]="ttest.controlMean" name="controlMean">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="sigma">Standard deviation (&sigma;)</label>
                      <input class="form-control" id="sigma"
                             type="number"
                             required
                             [(ngModel)]="ttest.sigma" name="sigma">
                    </div>
                  </div>
                </div>
              </div>
              <button type="submit" class="btn btn-success"
                      [disabled]="!ttestForm.form.valid">
                Calculate
              </button>
            </form>
          </template>
        </ngb-tab>
        <ngb-tab *ngFor="let ttest of ttests; let i = index"
          title="Test {{i+1}}" id="test-{{i+1}}">
          <template ngbTabContent>
            <table>
              <thead>
                <tr><th>Param</th><th>Value</th>
              </thead>
              <tbody>
                <tr><td>output</td><td>{{ttest.output}}</td></tr>
                <tr><td>alpha</td><td>{{ttest.alpha}}</td></tr>
                <tr><td>power</td><td>{{ttest.power}}</td></tr>
                <tr><td>caseMean</td><td>{{ttest.caseMean}}</td></tr>
                <tr><td>controlMean</td><td>{{ttest.controlMean}}</td></tr>
                <tr><td>sigma</td><td>{{ttest.sigma}}</td></tr>
              </tbody>
            </table>
          </template>
        </ngb-tab>
      </ngb-tabset>
    </div>
    <div #main id="main" class="col-sm-8" (window:resize)="onResize()">
      <div *ngIf="plotSource">
        <img [src]="plotSource">
      </div>
    </div>
  </div>
</div>
